<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>파이어베이스 리마인드</title>
    <!-- compat이 붙으면 module 타입이 아님 -->
    <!-- module 타입은 import{} from ""을 이용해서 함수를 가져옴 -->
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore-compat.js"></script>
  </head>
  <body>
    <table border="1">
      <tr>
        <th>이름</th>
        <th>성별</th>
        <th>나이</th>
        <th>주소</th>
        <th>전화번호</th>
      </tr>
    </table>
  </body>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBK-lYtS0MRJyn5EIoCrFsMqT3dUNQeQ50",
      authDomain: "myproject-337a3.firebaseapp.com",
      projectId: "myproject-337a3",
      storageBucket: "myproject-337a3.appspot.com",
      messagingSenderId: "8256987388",
      appId: "1:8256987388:web:05765c4ea8d4ab5d65b779",
    };

    // Initialize Firebase (firebase 객체는 선언한 것이 아닌 위에 선언되어 있는 script에 들어있음)
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    // console.log(db);

    async function getDatas(collectionName) {
      const querySnapshot = await db.collection(collectionName).get();
      const tableTag = document.querySelector("table");
      //   console.log(querySnapshot);
      querySnapshot.forEach((doc) => {
        "afterbegin",
          `
        <td>
            <tr>${doc.name}</tr>
            <tr>${doc.gender}</tr>
            <tr>${doc.age}</tr>
            <tr>${doc.addr}</tr>
            <tr>${doc.tel}</tr>
            </td>
        `;
        // console.log(doc.data());
      });
    }
    getDatas("member"); // collectionName이 "member"입니다.

    //     db.collection("member").get().then((querySnapshot) => {
    //     querySnapshot.forEach((doc) => {
    //         // console.log(`${doc.id} => ${doc.data()}`);
    //         console.log(doc.data());
    //     });
    // });
  </script>
</html>
