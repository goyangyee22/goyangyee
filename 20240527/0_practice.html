<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  </head>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      background-image: url("../resources/img/background.jpg");
      background-size: cover;
      background-repeat: no-repeat;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #container {
      width: 90%;
      height: 80%;
      position: relative;
      /* display: flex;
      justify-content: center;
      align-items: flex-end; */
    }
    #input {
      width: 180px;
      height: 45px;
      font-size: 16px;
      padding: 10px;
      border: none;
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
    }
    .word {
      color: #ffffff;
      font-size: 30px;
      font-weight: 500;
      position: absolute;
    }
    .score {
      color: #ffffff;
      font-size: 40px;
      font-weight: 600;
      position: absolute;
      top: 0;
      right: 0;
      padding: 15px;
    }
  </style>
</head>
<body>
 <div id="container">
  <input id="input" type="text" placeholder="단어를 입력하세요." />
 </div>
 <div class="score">총점 : 0</div>
  </body>
  <script>
    const words = [
    "DW",
      "JavaScript",
      "DOM",
      "BOM",
      "document",
      "window",
      "Event",
    ];
    const container = document.querySelector("#container");
    const input = document.querySelector("#input");
    const scorePanel = document.querySelector(".score");
    let count = 0;
    let score = 0;

  // 단어들이 뿌려지는 범위 설정
  const maxPositionX = container.offsetWidth - 90;
  const maxPositionY = container.offsetHeight - 100;

  // 단어들이 생성되고 화면에 출력하는 부분
  function init(){
    words.forEach(function (el){
      // span 태그 생성
      const span = document.createElement("span");

      // word 배열에 span 태그 추가
      span.innerHTML = el;

      // span 태그에 클래스(word) 추가
      span.classList.add("word");

      // span 태그에 아이디 속성 추가
      span.setAttribute("id", el);

      // span 태그의 위치를 랜덤 설정
      span.style.top = `${Math.floor(Math.random() * maxPositionY)}px`;
      span.style.left = `${Math.floor(Math.random() * maxPositionX)}px`;

      // container div에 span 태그 추가
      container.append(span);
    })
  }

  // 입력한 텍스트와 id가 일치하면 span 태그 제거
  input.addEventListener("change", function(){
    const word = document.querySelector(`span[id=${input.value}]`);
    if(word != null){
      word.remove();
      score = score + 100;
      scorePanel.innerHTML = `총점 : ${score}`;
      count++;

      if(count == words.length){
        alert("클리어")
        if(confirm("재도전")){
          window.location.reload();
        }
      }
    }
    input.value = "";
  })

  // 단어들이 내려오는 부분
  function wordRain(){
    const words = document.querySelectorAll(".word");
    setInterval(function (){
      words.forEach(function (el){
        const rectSize = el.getBoundingClientRect();
        el.style.top = `${rectSize.top - 75}px`;
        if(
          el.getBoundingClientRect().bottom >
          container.getBoundingClientRect().bottom - 
          parseInt(getComputedStyle(input).height.split("px")[0])
        ){
          el.remove();
        }
      })
    }, 1000)
  }

  init();
  wordRain();
  </script>
</html>